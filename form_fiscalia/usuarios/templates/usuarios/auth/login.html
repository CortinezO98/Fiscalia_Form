{% extends "usuarios/base.html" %}
{% load static %}
{% block title %}Iniciar Sesión{% endblock %}

{% block content %}
<div class="min-vh-100 d-flex justify-content-center align-items-center bg-white">
  <div class="col-md-3">
    <div class="d-flex justify-content-center align-items-center gap-3 mb-3 animate__animated animate__fadeInDown">
      <img src="{% static 'img/logofiscalia.png' %}" alt="Logo Fiscalía" class="img-fluid" style="max-height: 70px;">
      <img src="{% static 'img/logo_iq.png' %}" alt="Logo IQ Outsourcing" class="img-fluid" style="max-height: 70px;">
    </div>
    <h5 class="text-center fw-bold text-primary animate__animated animate__fadeInDown mb-4">Fiscalía General de la
      Nación</h5>
    {% if form.errors %}
    <div class="alert alert-warning alert-dismissible fade show animate__animated animate__fadeIn" role="alert">
      <strong>⚠️ Atención:</strong> Usuario, contraseña o CAPTCHA incorrectos.
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
    </div>
    {% endif %}
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-success alert-dismissible fade show animate__animated animate__fadeIn" role="alert">
      <i class="bi bi-check-circle-fill me-2"></i>{{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
    </div>
    {% endfor %}
    {% endif %}
    <div class="card shadow-lg rounded-4 border-0 bg-light animate__animated animate__fadeInUp">
      <div class="card-header bg-primary text-white text-center rounded-top-4">
        <h5 class="mb-0"><i class="bi bi-person-lock me-2"></i>Inicio de Sesión</h5>
      </div>
      <div class="card-body p-4">
        <form method="post" novalidate>
          {% csrf_token %}
          <div class="mb-3">
            <label for="id_username" class="form-label">Usuario</label>
            <input type="text" name="username" id="id_username" class="form-control" placeholder="Ingresa tu usuario"
              required autocomplete="off">
          </div>
          <div class="mb-3">
            <label for="id_password" class="form-label">Contraseña</label>
            <input type="password" name="password" id="id_password" class="form-control" placeholder="********"
              required>
          </div>
          {% if form.fields.captcha %}
          <div class="mb-3 text-center">
            {{ form.captcha }}
          </div>
          {% endif %}
          <div class="d-grid">
            <button type="submit" class="btn btn-outline-primary">
              <i class="bi bi-box-arrow-in-right me-1"></i>Ingresar
            </button>
          </div>
        </form>
      </div>
    </div>
    <div class="text-center mt-3">
      <small class="text-muted">© Fiscalía General de la Nación - IQ Outsourcing - {{ now|date:"Y" }}</small>
    </div>
  </div>
</div>
{% endblock %}